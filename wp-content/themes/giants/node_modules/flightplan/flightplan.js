var Flightplan = require('./index');

var plan = new Flightplan();

plan.briefing({
	debug: false,
	destinations: {
		'single': {
			host: 'jookbox.me',
			username: 'pstadler',
			agent: process.env.SSH_AUTH_SOCK
		},
		'multi': [
			{
				host: 'jookbox.me',
				username: 'pstadler',
				agent: process.env.SSH_AUTH_SOCK
			},
			{
				host: 'jookbox.me',
				username: 'pstadler',
				agent: process.env.SSH_AUTH_SOCK
			}
		]
	}
});

// run commands on localhost
plan.local(['test', 'default'], function(local) {
	// local.hostname();
	// //local.abort();
	// local.ls('foo', {failsafe: true});
	// //local.ls('foo');
	// local.log('Copy files to remote host');
	// local.exec('git ls-files -z', {silent: true});
	// local.cd('/tmp');
	// local.pwd();
	//local.abort('User wants this');
	//local.ls('lslsls');
	local.with('cd ~', function() {
		local.with('cd GitHub', function() {
			local.ls();
			//local.sudo('ls -al');
		});
		local.ls();
	});
	local.ls();
	// var files = local.git('ls-files -z');
	// local.transfer(files, '/tmp/foo');
});

// run commands on remote hosts (destinations)
plan.remote('remote', function(remote) {
	//remote.hostname();
	//remote.ls('foo', {failsafe: true});
	//remote.ls('foo');
	remote.ls('-al');
	//remote.abort();
});

plan.disaster(function() {
	console.log('test');
});